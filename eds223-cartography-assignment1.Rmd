---
title: "EDS 220 Assignment 1 Cartography"
author: "Desik Somasundaram"
date: "9/30/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(spData)
library(tidyverse)
library(sf)
library(tmap)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r coffee}
# found by searching for "global coffee data"
u = "http://www.ico.org/prices/m1-exports.pdf"
download.file(u, "data.pdf", mode = "wb")
#pdftables::convert_pdf(input_file = "data.pdf", output_file = "coffee-data-messy.csv", api_key = "7he17mywbvwi")
d = read_csv("coffee-data-messy.csv")
#file.remove("coffee-data-messy.csv")
#file.remove("data.pdf")
coffee_data = slice(d, -c(1:9)) %>% 
  select(name_long = 1, coffee_production_2016 = 2, coffee_production_2017 = 3) %>% 
  filter(!is.na(coffee_production_2016)) %>% 
  mutate_at(2:3, str_replace, " ", "") %>% 
  mutate_at(2:3, as.integer)
world_coffee = left_join(world, coffee_data)
plot(world_coffee[c("coffee_production_2016", "coffee_production_2017")])
b = c(0, 500, 1000, 2000, 3000)


tm_shape(world_coffee) +
  tm_fill("coffee_production_2017", title = "Thousand 60kg bags", breaks = b,
          textNA = "No data", colorNA = NULL)
tmap_mode("view") # for an interactive version
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
